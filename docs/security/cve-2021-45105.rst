=================================
CVE-2021-45105 and CVE-2021-44832
=================================

*First published: 2022-01-02*

.. attention::

   **The LOCKSS 2.x system up to and including version 2.0-alpha5 (originally released 2021-12-17), and the custom Solr and OpenWayback containers it includes, are affected by CVE-2021-45105 and CVE-2021-44832.**

.. rubric:: Description

Following the early December 2021 [#fnsee]_ discovery of well-publicized critical remote code execution vulnerabilities in Apache Log4j 2.x, a ubiquitous Java library for recording information to software logs, additional Log4j 2.x vulnerabilities of moderate severity have been discovered, tracked as CVE-2021-45105 and CVE-2021-44832.

These vulnerabilities affect the LOCKSS system 2.x up to and including version 2.0-alpha5 (originally released 2021-12-17), and the custom Solr and OpenWayback containers it includes, requiring an upgrade to fix. *Note that the LOCKSS 1.x system is not affected by these vulnerabilities, requiring no action at this time.*

.. rubric:: Remediation

.. attention::

   **The recommended remediation is to upgrade LOCKSS 2.x version 2.0-alpha5 (originally released 2021-12-17) or earlier to LOCKSS 2.0-alpha5b.**

*  To upgrade from LOCKSS 2.0-alpha5 (originally released 2021-12-17) to LOCKSS-2.0-alpha5b:

   1. Log in to the host system as the ``lockss`` user and navigate to the :file:`lockss-installer` directory.

   2. Stop the LOCKSS system with this command:

      .. code-block:: shell

         scripts/stop-lockss

   3. Upgrade the LOCKSS Installer to 2.0-alpha5b with this command:

      .. code-block:: shell

         curl -sSfL https://www.lockss.org/downloader | sh -s - --git-tag=version-2.0-alpha5b

      or:

      .. code-block:: shell

         wget -qO- https://www.lockss.org/downloader | sh -s - --git-tag=version-2.0-alpha5b

   4. Restart the LOCKSS system with this command:

      .. code-block:: shell

         scripts/start-lockss

*  To upgrade from LOCKSS 2.0-alpha4 (all variants) to LOCKSS 2.0-alpha5b, see `Upgrading From LOCKSS 2.0-alpha4 </projects/manual/en/2.0-alpha5/upgrading/index.html>`_ in the LOCKSS 2.0-alpha5 System Manual.

*  To upgrade from LOCKSS 2.x version 2.0-alpha3 or earlier (all variants), you will need to upgrade incrementally; see `Upgrading From LOCKSS 2.0-alpha1 </projects/manual/en/2.0-alpha2/upgrading.html>`_, `Upgrading From LOCKSS 2.0-alpha2 </projects/manual/en/2.0-alpha3/introduction/upgrading.html>`_, `Upgrading From LOCKSS 2.0-alpha3 </projects/manual/en/2.0-alpha4/upgrading/index.html>`_, and `Upgrading From LOCKSS 2.0-alpha4 </projects/manual/en/2.0-alpha5/upgrading/index.html>`_.

.. important::

   If you use the LOCKSS 2.x system with an external Solr database or external OpenWayback replay engine, talk to your system administrator about ensuring these external systems, which can also be affected by these vulnerabilities, are up to date.

.. rubric:: References

*  https://nvd.nist.gov/vuln/detail/CVE-2021-45105

*  https://nvd.nist.gov/vuln/detail/CVE-2021-44832

*  https://logging.apache.org/log4j/2.x/security.html

----

.. rubric:: Footnotes

.. [#fnsee]

   See :doc:`cve-2021-44228`.
